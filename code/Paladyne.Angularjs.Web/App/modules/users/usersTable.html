<div ng-show="module.canSee || module.canEdit">
    <h1>{{ module.name }}</h1>
    <div kendo-grid="grid"
        k-options="usersGridOptions">
        <div k-detail-template ng-if="module.canEdit" class="k-detail-template">
            <form ng-submit="save(dataItem)">
                <div class="k-edit-form-container">
                    <div class="k-edit-label">
                        <label for="firstName">First name</label>
                    </div>
                    <div class="k-edit-field">
                        <input type="text" class="k-input k-textbox" name="firstName" required="required" ng-model="dataItem.firstName">
                    </div>
                    <div class="k-edit-label">
                        <label for="firstName">Last name</label>
                    </div>
                    <div class="k-edit-field">
                        <input type="text" class="k-input k-textbox" name="lastName" required="required" ng-model="dataItem.lastName">
                    </div>

                    <div class="k-edit-label" ng-repeat-start="module in dataItem.modules">
                        <label for="{{ module.id }}">{{ module.name }}</label>
                    </div>
                    <div class="k-edit-field" ng-repeat-end>
                        <select class="form-control" name="{{ module.id }}" ng-model="dataItem.modules[$index].permission">
                            <option ng-repeat="(key, name) in permissions" value="{{ name }}" ng-selected="name == dataItem.modules[$parent.$index].permission">{{ name }}
                            </option>
                        </select>
                    </div>


                    <div class="k-edit-field">
                        <button type="submit">Save</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
